<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Danish Ali Raza — Futuristic Portfolio</title>
  <meta name="description" content="Mathematics Lecturer & ML/AI Researcher — Physics-Informed Neural Networks • Numerical Analysis • Computational Methods" />
  <meta property="og:title" content="Danish Ali Raza — Portfolio" />
  <meta property="og:description" content="Mathematics Lecturer & ML/AI Researcher" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0ea5e9" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: 12 13 24; /* #0c0d18 */
      --text: 235 245 255;
      --muted: 161 172 184;
      --card: 20 22 40;
      --accent: 14 165 233; /* sky-500 */
      --accent2: 168 85 247; /* fuchsia-500 */
      --accent3: 99 102 241; /* indigo-500 */
      --ring: 56 189 248; /* sky-400 */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
      color: rgb(var(--text));
      background: radial-gradient(1200px 800px at 20% -10%, rgba(14,165,233,.18), transparent 60%),
                  radial-gradient(1000px 800px at 110% 10%, rgba(168,85,247,.18), transparent 60%),
                  rgb(var(--bg));
      overflow-x: hidden;
    }
    /* Canvas background */
    #space { position: fixed; inset: 0; z-index: -1; display: block; filter: saturate(120%) contrast(105%); }

    /* Global elements */
    a { color: rgb(var(--ring)); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container { width: min(1200px, 92vw); margin: 0 auto; }
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .chip { padding: .45rem .75rem; border: 1px solid rgba(255,255,255,.08); border-radius: 999px; display: inline-flex; gap: .5rem; align-items: center; background: rgba(255,255,255,.04); }
    .chip svg { width: 16px; height: 16px; opacity: .8; }

    /* Top progress bar */
    #progress { position: fixed; top: 0; left: 0; height: 3px; width: 0%; background: linear-gradient(90deg, rgb(var(--accent)), rgb(var(--accent2)), rgb(var(--accent3))); z-index: 50; box-shadow: 0 0 18px rgba(168,85,247,.6); }

    /* Navbar */
    .nav { position: sticky; top: 12px; z-index: 40; margin-top: 12px; }
    .nav-inner { display: flex; align-items: center; justify-content: space-between; padding: .65rem .9rem; gap: .75rem; }
    .nav .brand { font-weight: 800; letter-spacing: .5px; font-size: 1rem; display:flex; align-items:center; gap:.6rem }
    .orb { width: 26px; height: 26px; border-radius: 999px;
      background: conic-gradient(from 210deg, rgb(var(--accent)), rgb(var(--accent2)), rgb(var(--accent3)), rgb(var(--accent)));
      box-shadow: 0 0 22px rgba(14,165,233,.75);
    }
    .nav a { padding: .55rem .8rem; border-radius: 999px; border: 1px solid transparent; transition: .2s ease; font-weight: 600; }
    .nav a:hover { border-color: rgba(255,255,255,.08); background: rgba(255,255,255,.04); text-decoration: none; }

    /* Hero */
    .hero { padding: clamp(3rem, 7vh, 6rem) 0 2rem; display: grid; gap: 1.25rem; }
    .title {
      font-size: clamp(2rem, 4vw + 1rem, 4rem); line-height: 1.03; font-weight: 800; letter-spacing: -0.02em;
      background: linear-gradient(180deg, #fff, rgba(255,255,255,.78));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      filter: drop-shadow(0 10px 30px rgba(14,165,233,.15));
    }
    .subtitle { color: rgb(var(--muted)); font-weight: 600; font-size: clamp(.95rem, .7vw + .75rem, 1.15rem); }
    .cta { display: flex; flex-wrap: wrap; gap: .75rem; margin-top: .4rem; }
    .btn { position: relative; display: inline-flex; align-items: center; gap: .55rem; padding: .8rem 1rem; border-radius: 12px; font-weight: 700; letter-spacing: .2px; border: 1px solid rgba(255,255,255,.1); background: rgba(255,255,255,.04); }
    .btn.primary {
      background: linear-gradient(90deg, rgba(14,165,233,.18), rgba(168,85,247,.18));
      border-color: rgba(255,255,255,.16);
      box-shadow: inset 0 0 24px rgba(168,85,247,.18), 0 8px 22px rgba(0,0,0,.25);
    }
    .btn:hover { transform: translateY(-1px); text-decoration: none; }

    /* Sections */
    section { padding: 2.5rem 0; }
    .section-title { font-weight: 800; letter-spacing: .5px; margin: 0 0 1rem; font-size: 1.15rem; text-transform: uppercase; color: rgb(var(--muted)); }
    .grid { display: grid; gap: 1rem; }
    @media (min-width: 900px) { .grid.cols-2 { grid-template-columns: 1.2fr 1fr; } }

    /* Cards */
    .card { padding: 1.1rem; position: relative; overflow: hidden; }
    .card .shine { position: absolute; inset: -1px; border-radius: inherit; background: radial-gradient(600px 200px at var(--mx,50%) -10%, rgba(255,255,255,.12), transparent 35%); pointer-events: none; }
    .card h3 { margin: .1rem 0 .35rem; font-size: 1.05rem; }
    .meta { color: rgb(var(--muted)); font-size: .9rem; }

    /* Timelines */
    .timeline { position: relative; margin: .5rem 0 0; }
    .timeline::before { content: ""; position: absolute; left: 12px; top: 0; bottom: 0; width: 2px; background: linear-gradient(rgb(var(--accent)), rgba(255,255,255,.15)); opacity: .6; }
    .titem { position: relative; padding-left: 2.1rem; margin: 1rem 0; }
    .titem::marker { content: none; }
    .titem .dot { position: absolute; left: 6px; top: .25rem; width: 12px; height: 12px; border-radius: 999px; background: radial-gradient(circle at 35% 35%, #fff, rgb(var(--accent)) 60%, rgba(14,165,233,.2)); box-shadow: 0 0 10px rgba(14,165,233,.7); }

    /* Skills */
    .skills { display: flex; flex-wrap: wrap; gap: .6rem; }

    /* Footer */
    footer { padding: 2rem 0 3rem; color: rgb(var(--muted)); text-align: center; }

    /* Reveal animations */
    .reveal { opacity: 0; transform: translateY(12px) scale(.98); transition: .6s cubic-bezier(.2,.65,.2,1); }
    .reveal.visible { opacity: 1; transform: none; }

    /* Command palette */
    .palette { position: fixed; inset: 0; display: none; place-items: center; z-index: 60; background: rgba(0,0,0,.5); }
    .palette.open { display: grid; }
    .palette .panel { width: min(700px, 92vw); border-radius: 16px; overflow: hidden; }
    .palette input { width: 100%; padding: 1rem 1.2rem; border: 0; outline: 0; color: #fff; background: rgba(255,255,255,.04); font-size: 1rem; border-bottom: 1px solid rgba(255,255,255,.08); }
    .palette .list { max-height: 50vh; overflow: auto; }
    .palette .row { padding: .85rem 1.2rem; display: flex; align-items: center; gap: .65rem; border-bottom: 1px solid rgba(255,255,255,.06); cursor: pointer; }
    .palette .row:hover { background: rgba(255,255,255,.05); }
    .kbd { border: 1px solid rgba(255,255,255,.12); border-bottom-width: 2px; padding: .2rem .4rem; border-radius: 6px; font-size: .85rem; background: rgba(255,255,255,.05); }

    /* Back to top */
    #toTop { position: fixed; right: 18px; bottom: 22px; z-index: 40; opacity: 0; transform: translateY(8px); transition: .3s ease; }
    #toTop.visible { opacity: 1; transform: none; }

    /* Accent glow divider */
    .glow { height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent); filter: drop-shadow(0 0 10px rgba(168,85,247,.8)); margin: 1.5rem 0; }

    /* Utility */
    .row { display: flex; flex-wrap: wrap; gap: .6rem; align-items: center; }
    .right { text-align: right; }

    /* NEW: Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;place-items:center;z-index:70}
    .lightbox.open{display:grid}
    .lightbox img{max-width:92vw;max-height:92vh;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.6)}
    .lightbox .close{position:absolute;top:14px;right:18px;font-size:28px;color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:10px;padding:.25rem .55rem;background:rgba(255,255,255,.06);cursor:pointer}
  </style>
</head>
<body>
  <canvas id="space" aria-hidden="true"></canvas>
  <div id="progress"></div>

  <header class="nav container">
    <div class="nav-inner glass">
      <div class="brand"><span class="orb" aria-hidden="true"></span> Danish Ali Raza</div>
      <nav class="row" aria-label="Primary">
        <a href="#about">About</a>
        <a href="#experience">Experience</a>
        <a href="#education">Education</a>
        <a href="#projects">Projects</a>
        <a href="#publications">Publications</a>
        <a href="#skills">Skills</a>
        <a href="#gallery">Gallery</a>
        <a href="#contact">Contact</a>
      </nav>
      <div class="row"><span class="kbd" title="Open command palette">Ctrl/⌘ + K</span></div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1 class="title reveal" style="--delay:0s">Mathematics Lecturer & ML/AI Researcher</h1>
      <p class="subtitle reveal" style="--delay:.05s">Physics-Informed Neural Networks • Numerical Analysis • Computational Methods • Scientific Computing</p>
      <div class="cta reveal" style="--delay:.1s">
        <a class="btn primary" href="#" download>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v12m0 0 4-4m-4 4-4-4M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Download CV</a>
        <a class="btn" href="#projects">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7h18M3 12h18M3 17h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
          View Projects</a>
        <a class="btn" href="#contact">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 10c0 6-9 12-9 12S3 16 3 10a9 9 0 1 1 18 0Z" stroke="currentColor" stroke-width="1.6"/><circle cx="12" cy="10" r="3" fill="currentColor"/></svg>
          Hire Me</a>
      </div>
    </section>

    <section id="about" class="grid cols-2">
      <div class="card glass reveal">
        <div class="shine"></div>
        <h2 class="section-title">About</h2>
        <p>MPhil in Mathematical Sciences with a passion for <strong>physics-informed neural networks</strong>, <strong>computational methods</strong>, and <strong>machine learning</strong>. Experienced lecturer and researcher with conference presentations, and hands-on programming in <strong>Python</strong>, <strong>MATLAB</strong>, and <strong>Wolfram Mathematica</strong>.</p>
        <div class="glow"></div>
        <div class="row">
          <span class="chip" title="Karachi, Pakistan">
            <svg viewBox="0 0 24 24" fill="none"><path d="M12 21s7-5.16 7-11a7 7 0 1 0-14 0c0 5.84 7 11 7 11Z" stroke="currentColor" stroke-width="1.6"/><circle cx="12" cy="10" r="3" fill="currentColor"/></svg>
            Karachi, PK
          </span>
          <a class="chip" href="mailto:danishbahoot@gmail.com">
            <svg viewBox="0 0 24 24" fill="none"><path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.6"/><path d="M22 8 12 14 2 8" stroke="currentColor" stroke-width="1.6"/></svg>
            Email
          </a>
          <a class="chip" href="https://www.linkedin.com/in/danish-ar" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5A2.5 2.5 0 1 1 5 8.5a2.5 2.5 0 0 1 0-5ZM3 9h4v12H3zM9 9h4v2.5h.06A4.4 4.4 0 0 1 17 9c3.3 0 4 2.2 4 5.1V21h-4v-5.3c0-1.3 0-3-2-3s-2.3 1.4-2.3 2.9V21H9z"/></svg>
            LinkedIn
          </a>
          <a class="chip" href="https://wa.me/923218091761" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" fill="none"><path d="M20 11.5A8.5 8.5 0 1 1 7.2 3.5a8.5 8.5 0 0 1 12.8 8v0Z" stroke="currentColor" stroke-width="1.6"/><path d="m7 20-3.5 1L4 18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><path d="M8.5 7.5c.3 3.2 2.8 5.7 6 6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
            WhatsApp
          </a>
        </div>
      </div>
      <div class="card glass reveal" style="min-height: 100%">
        <div class="shine"></div>
        <h2 class="section-title">Highlights</h2>
        <ul>
          <li>Lecturer at <strong>Iqra University</strong> (Airport Campus), Karachi (2024—Present)</li>
          <li>Poster: <em>Computational Technique for the Lane-Emden Equation</em> — IBA-SMCS (2023)</li>
          <li>Paper: <em>Fredholm–Volterra Integro-Differential Equations</em> — University of Karachi (2022)</li>
          <li>Deep-learning forecasts for climate/temperature trends; strong background in numerical methods</li>
        </ul>
      </div>
    </section>

    <section id="experience">
      <h2 class="section-title">Experience</h2>
      <ol class="timeline">
        <li class="titem reveal">
          <span class="dot"></span>
          <h3>Iqra University — Mathematics Lecturer</h3>
          <div class="meta">Airport Campus, Karachi • 2024 — Present</div>
        </li>
        <li class="titem reveal">
          <span class="dot"></span>
          <h3>Federal Urdu University — Mathematics Lecturer</h3>
          <div class="meta">Karachi • 2023 — 2024</div>
        </li>
        <li class="titem reveal">
          <span class="dot"></span>
          <h3>Maqsad — Online Mathematics Tutor</h3>
          <div class="meta">Karachi • 2023 — 2024</div>
        </li>
        <li class="titem reveal">
          <span class="dot"></span>
          <h3>Iqra Rauzatul Atfal Model School — Mathematics Teacher</h3>
          <div class="meta">Karachi • 2021 — 2022</div>
        </li>
      </ol>
    </section>

    <section id="education">
      <h2 class="section-title">Education</h2>
      <div class="grid">
        <div class="card glass reveal">
          <div class="shine"></div>
          <h3>M.Phil. (Mathematical Sciences)</h3>
          <div class="meta">Federal Urdu University of Arts, Sciences & Technology • 2021 — 2023 • Grade: B</div>
          <p><strong>Thesis:</strong> On Effective Computational Technique — A Study of Lane-Emden Equation (Astrophysics)</p>
        </div>
        <div class="card glass reveal">
          <div class="shine"></div>
          <h3>BS (Mathematical Sciences)</h3>
          <div class="meta">Federal Urdu University of Arts, Sciences & Technology • 2017 — 2021 • Grade: B</div>
          <p><strong>Project:</strong> Analytical Technique for non-linear KdV & FPDE using Laplace transform (novel method)</p>
        </div>
        <div class="card glass reveal">
          <div class="shine"></div>
          <h3>Intermediate (Pre-Engineering)</h3>
          <div class="meta">Govt. Atta Shad Degree College Turbat • 2016 — 2017</div>
        </div>
        <div class="card glass reveal">
          <div class="shine"></div>
          <h3>Matriculation (Science Group)</h3>
          <div class="meta">Govt. High School Absor Turbat • 2014 — 2016</div>
        </div>
      </div>
    </section>

    <section id="projects">
      <h2 class="section-title">Projects</h2>
      <div class="grid">
        <article class="card glass reveal" data-tilt>
          <div class="shine"></div>
          <h3>Lane-Emden Equation — Computational Technique</h3>
          <p>Developed and evaluated a robust numerical method for second-order Lane-Emden equations arising in astrophysics; implemented in Python and Mathematica.</p>
          <div class="row meta"><span class="chip">Python</span><span class="chip">Mathematica</span><span class="chip">Numerical Methods</span></div>
        </article>
        <article class="card glass reveal" data-tilt>
          <div class="shine"></div>
          <h3>Analytical Method for non-linear KdV & FPDE</h3>
          <p>Designed a Laplace-based analytic framework for coupled non-linear systems; validated with benchmark cases and error analysis.</p>
          <div class="row meta"><span class="chip">Laplace Transform</span><span class="chip">Symbolic Math</span><span class="chip">FPDE</span></div>
        </article>
      </div>
    </section>

    <section id="publications">
      <h2 class="section-title">Publications & Conferences</h2>
      <div class="grid">
        <div class="card glass reveal">
          <div class="shine"></div>
          <h3>Poster — Research Colloquia 2023 (IBA-SMCS)</h3>
          <div class="meta">“A Computational Technique for Solving Second-Order Lane-Emden Equation” • 26 Dec 2023</div>
        </div>
        <div class="card glass reveal">
          <div class="shine"></div>
          <h3>Paper — International Conference of Mathematical Sciences (UoK)</h3>
          <div class="meta">“A New Analytical Method for Solving Fredholm–Volterra Integro-Differential Equations” • 2 Nov 2022</div>
        </div>
      </div>
    </section>

    <section id="skills">
      <h2 class="section-title">Skills</h2>
      <div class="card glass reveal">
        <div class="shine"></div>
        <div class="skills">
          <span class="chip">Python</span>
          <span class="chip">TensorFlow</span>
          <span class="chip">PyTorch</span>
          <span class="chip">NumPy</span>
          <span class="chip">Pandas</span>
          <span class="chip">Matplotlib</span>
          <span class="chip">Wolfram Mathematica</span>
          <span class="chip">Wolfram Language</span>
          <span class="chip">MATLAB</span>
          <span class="chip">LaTeX</span>
          <span class="chip">Scientific Writing</span>
          <span class="chip">Numerical Analysis</span>
          <span class="chip">PINNs</span>
        </div>
      </div>
    </section>

    <!-- NEW: Gallery -->
    <section id="gallery">
      <h2 class="section-title">Gallery</h2>
      <div id="galleryGrid" class="grid" style="grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));"></div>
    </section>

    <section id="contact">
      <h2 class="section-title">Contact</h2>
      <div class="grid">
        <div class="card glass reveal">
          <div class="shine"></div>
          <div class="row" style="justify-content: space-between; align-items: start; gap: 1rem;">
            <div>
              <h3>Let’s collaborate</h3>
              <p class="meta">Open to research collaborations, consulting, and teaching.</p>
              <div class="row" style="margin-top: .5rem">
                <a class="chip" href="mailto:danishbahoot@gmail.com">danishbahoot@gmail.com</a>
                <a class="chip" href="https://wa.me/923218091761" target="_blank" rel="noopener">WhatsApp: +92 321 809 1761</a>
                <a class="chip" href="https://www.linkedin.com/in/danish-ar" target="_blank" rel="noopener">LinkedIn</a>
              </div>
            </div>
            <div class="right">
              <button class="btn" onclick="window.print()" title="Save as PDF">Print / Save as PDF</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="glow"></div>
      <div>© <span id="year"></span> Danish Ali Raza • Built with ❤️, math, and clean code.</div>
    </footer>
  </main>

  <!-- Command palette -->
  <div id="palette" class="palette" aria-hidden="true">
    <div class="panel glass">
      <input id="palInput" type="search" placeholder="Type to jump (About, Experience, Education, Projects, Publications, Skills, Gallery, Contact)…" aria-label="Command Palette" />
      <div class="list" id="palList"></div>
    </div>
  </div>

  <a id="toTop" class="btn glass" href="#top" aria-label="Back to top">↑ Top</a>

  <!-- NEW: Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <button class="close" aria-label="Close">✕</button>
    <img id="lightImg" alt="Full size photo">
  </div>

  <script>
    // ===== Canvas space background (constellations) =====
    const c = document.getElementById('space');
    const ctx = c.getContext('2d');
    let w, h, points = [], mouse = {x: -1e3, y: -1e3};
    const DPR = Math.min(window.devicePixelRatio || 1, 2);
    const opts = { count: 80, maxDist: 150, speed: .25 };
    function resize(){ w = c.width = innerWidth * DPR; h = c.height = innerHeight * DPR; c.style.width = innerWidth+'px'; c.style.height = innerHeight+'px'; }
    function rnd(a=0,b=1){ return a + Math.random()*(b-a); }
    function init(){ points = Array.from({length: opts.count}, _=>({ x: rnd(0,w), y: rnd(0,h), vx: rnd(-opts.speed, opts.speed), vy: rnd(-opts.speed, opts.speed)})); }
    function step(){ ctx.clearRect(0,0,w,h);
      for(const p of points){ p.x+=p.vx; p.y+=p.vy; if(p.x<0||p.x>w) p.vx*=-1; if(p.y<0||p.y>h) p.vy*=-1; }
      for(let i=0;i<points.length;i++){
        const p = points[i];
        // dots
        ctx.beginPath(); ctx.arc(p.x, p.y, 1.2*DPR, 0, Math.PI*2); ctx.fillStyle = 'rgba(255,255,255,.8)'; ctx.fill();
        // lines between close points
        for(let j=i+1;j<points.length;j++){
          const q = points[j];
          const dx = p.x-q.x, dy = p.y-q.y, d = Math.hypot(dx,dy);
          if(d < opts.maxDist*DPR){
            const a = 1 - d/(opts.maxDist*DPR);
            ctx.strokeStyle = `rgba(168,85,247,${0.12*a})`;
            ctx.lineWidth = DPR*.8*a; ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(q.x,q.y); ctx.stroke();
          }
        }
        // lines to mouse
        const dm = Math.hypot(p.x-mouse.x, p.y-mouse.y);
        if(dm < opts.maxDist*1.2*DPR){
          const a = 1 - dm/(opts.maxDist*1.2*DPR);
          ctx.strokeStyle = `rgba(14,165,233,${0.18*a})`; ctx.lineWidth = DPR*1*a; ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(mouse.x,mouse.y); ctx.stroke();
        }
      }
      requestAnimationFrame(step);
    }
    addEventListener('mousemove', e=>{ const r=c.getBoundingClientRect(); mouse.x=(e.clientX-r.left)*DPR; mouse.y=(e.clientY-r.top)*DPR; });
    addEventListener('mouseleave', ()=>{ mouse.x = mouse.y = -1e3; });
    addEventListener('resize', ()=>{ resize(); init(); });
    resize(); init(); step();

    // ===== Scroll progress & back-to-top =====
    const prog = document.getElementById('progress');
    const toTop = document.getElementById('toTop');
    addEventListener('scroll', ()=>{
      const s = document.documentElement.scrollTop || document.body.scrollTop;
      const d = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      prog.style.width = (s/d)*100 + '%';
      toTop.classList.toggle('visible', s>600);
    });

    // ===== Hover shine on cards =====
    document.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('pointermove', e=>{
        const r = card.getBoundingClientRect();
        card.style.setProperty('--mx', ((e.clientX - r.left)/r.width*100)+'%');
      });
    });

    // ===== 3D tilt for project cards =====
    document.querySelectorAll('[data-tilt]').forEach(el=>{
      const damp = 22; const reset = ()=>{ el.style.transform = ''; };
      el.addEventListener('pointermove', e=>{
        const r = el.getBoundingClientRect(); const x = e.clientX - r.left; const y = e.clientY - r.top;
        const rx = ((y/r.height)-.5)*-damp; const ry = ((x/r.width)-.5)*damp;
        el.style.transform = `perspective(800px) rotateX(${rx}deg) rotateY(${ry}deg) translateZ(6px)`;
      });
      el.addEventListener('pointerleave', reset); el.addEventListener('blur', reset);
    });

    // ===== Reveal on scroll =====
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); } });
    },{ threshold: .12 });
    document.querySelectorAll('.reveal').forEach(el=> io.observe(el));

    // ===== Command palette (Ctrl/Cmd+K) =====
    const pal = document.getElementById('palette');
    const palInput = document.getElementById('palInput');
    const palList = document.getElementById('palList');
    const items = [
      {label:'About', id:'about'},
      {label:'Experience', id:'experience'},
      {label:'Education', id:'education'},
      {label:'Projects', id:'projects'},
      {label:'Publications', id:'publications'},
      {label:'Skills', id:'skills'},
      {label:'Gallery', id:'gallery'},
      {label:'Contact', id:'contact'}
    ];
    function renderList(q=''){
      const ql = q.trim().toLowerCase();
      palList.innerHTML = items.filter(i=> i.label.toLowerCase().includes(ql)).map(i=>`<div class="row" data-id="${i.id}">↳ ${i.label}</div>`).join('');
      palList.querySelectorAll('.row').forEach(r=> r.addEventListener('click', ()=>{ location.hash = r.dataset.id; closePal(); }));
    }
    function openPal(){ pal.classList.add('open'); pal.setAttribute('aria-hidden','false'); palInput.value=''; renderList(); palInput.focus(); }
    function closePal(){ pal.classList.remove('open'); pal.setAttribute('aria-hidden','true'); }
    addEventListener('keydown', e=>{
      if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='k'){ e.preventDefault(); openPal(); }
      if(e.key==='Escape') closePal();
    });
    palInput.addEventListener('input', e=> renderList(e.target.value));
    pal.addEventListener('click', e=>{ if(e.target===pal) closePal(); });

    // ===== Gallery (shuffled, larger tiles) =====
    // Put your images in: assets/photos/
    const gallerySources = [
      'assets/photos/1.jpg',
      'assets/photos/2.jpg',
      'assets/photos/3.jpg',
      'assets/photos/4.jpg',
      'assets/photos/5.jpg',
      'assets/photos/6.jpg',
      'assets/photos/7.jpg',
      'assets/photos/8.jpg'
    ];
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
    function renderGallery(){
      const grid = document.getElementById('galleryGrid');
      if(!grid) return;
      shuffle(gallerySources.slice()).forEach(src=>{
        const fig = document.createElement('figure');
        fig.className = 'card glass reveal';
        fig.innerHTML = `
          <div class="shine"></div>
          <img src="${src}" alt="Photo" loading="lazy"
               style="width:100%;height:380px;object-fit:cover;border-radius:12px;cursor:zoom-in" />
        `;
        grid.appendChild(fig);
      });
      // observe newly added figures for reveal
      document.querySelectorAll('#galleryGrid .reveal').forEach(el=> io.observe(el));
    }
    renderGallery();

    // ===== Lightbox open/close =====
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightImg');
    const lbClose = lb.querySelector('.close');
    function openLB(src){ lbImg.src = src; lb.classList.add('open'); lb.setAttribute('aria-hidden','false'); }
    function closeLB(){ lb.classList.remove('open'); lb.setAttribute('aria-hidden','true'); lbImg.removeAttribute('src'); }
    document.getElementById('galleryGrid').addEventListener('click', e=>{
      const img = e.target.closest('img');
      if(!img) return;
      openLB(img.src);
    });
    lb.addEventListener('click', e=>{ if(e.target===lb) closeLB(); });
    lbClose.addEventListener('click', closeLB);
    addEventListener('keydown', e=>{ if(e.key==='Escape') closeLB(); });

    // ===== Year =====
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
